<div *ngIf=" visits && !visits.length" class="inner-box" dir="{{userDirection$ | async}}">

  <div class="no-visits-message" *ngIf="selectedQueueName">
    <p>
      <span>{{ 'no_visits_msg_line_one_left_text' | translate}}</span>&nbsp;<strong>{{selectedQueueName}}</strong>&nbsp;<span>
        {{ 'no_visits_msg_line_one_right_text' | translate}}</span>
    </p>
    <p>
      <span>{{ 'no_visits_msg_line_two_left_text' | translate}}</span>&nbsp;<span class="text-deco" (click)="goBackToQueueSection()">{{
        'no_visits_msg_line_two_right_text' | translate}}</span>
    </p>

  </div>

  
</div>



<div *ngIf="visits" dir="{{userDirection$ | async}}">
  <div class="qm-visit-list" *ngIf="visits.length>0">
    <div class="qm-visit-list__headers qm-flex-grid">
      <div class="qm-visit-list-header-item qm-col qm-flex-grid" (click)="sortByVisitId()">
        <div class="qm-visit-list-header-item-label qm-first-element-header">{{'visit' | translate}}</div>
        <div *ngIf="sortingIndicator==='VISITID'"><i class="sort-icon" [ngClass]="{'icon-caret-up': sortByVisitIdAsc !== true, 'icon-caret-down': sortByVisitIdAsc ===  true }"></i></div>
      </div>
      <div class="qm-visit-list-header-item qm-col qm-flex-grid" (click)="sortByCustomer()">
        <div class="qm-visit-list-header-item-label">{{'visit_customer_label' | translate}}</div>
        <div *ngIf="sortingIndicator==='CUSTOMER'"><i class="sort-icon" [ngClass]="{'icon-caret-up': sortByCustomerAsc !== true, 'icon-caret-down': sortByCustomerAsc ===  true }"></i></div>
      </div>

      <div class="qm-visit-list-header-item qm-col qm-flex-grid" (click)="sortByService()">
        <div class="qm-visit-list-header-item-label"> {{ 'visit_service_label' | translate}} </div>
        <div *ngIf="sortingIndicator==='SERVICE'"><i class="sort-icon" [ngClass]="{'icon-caret-up': sortByServiceAsc !== true, 'icon-caret-down': sortByServiceAsc ===  true }"></i></div>
      </div>

      <div class="qm-visit-list-header-item qm-col qm-flex-grid" (click)="sortByAppTime()">
        <div class="qm-visit-list-header-item-label"> {{ 'visit_appointment_time_label' | translate}} </div>
        <div *ngIf="sortingIndicator==='APPTIME'"><i class="sort-icon" [ngClass]="{'icon-caret-up': sortByAppTimeAsc !== true, 'icon-caret-down': sortByAppTimeAsc ===  true }"></i></div>
      </div>


      <div class="qm-visit-list-header-item qm-col qm-flex-grid">
        <div class="qm-visit-list-header-item-label"> {{ 'visit_wait_time_label' | translate}} </div>
      </div>
      <div class="info-icon-container"></div>
    </div>
    

    <div id="qm-visit-container" *ngIf="visits.length" class="qm-visit-list__body" dir="{{userDirection$ | async}}">

      <div class="qm-visit-list-body-row-container" *ngFor="let visit of visits; index as i">
        <div style="display:flex">
        <div (click)="selectVisit(i,visit.visitId)" class="qm-visit-list-body-row" [ngClass]="{'qm-visit-list-body-row-selected':  visits && visitClicked && selectedVisitId === visit.visitId}">
         <div class="qm-flex-grid ">
          <div class="qm-col qm-body-item qm-visit-list-body-row-caret-view">
            <div class="qm-visit-list-body-row-label qm-first-element"> {{visit.ticketId}} </div>
          </div>
          <div class="qm-col qm-body-item">{{visit.customerName }}</div>
          <div class="qm-col qm-body-item"> {{visit.serviceName }} </div>
          <div class="qm-col qm-body-item"> {{getAppointmentTime(visit)}}</div>
          <div class="qm-col qm-body-item">{{ visit.waitingTimeStr }} min</div>
        </div>
        
        <!-- Extended visit container -->
          <div class="qm-expanded-visit-container" *ngIf="infoVisitId === visit.visitId">  
            <div class="qm-flex-grid" *ngIf="getAppointmentTime(visit)!='-'">
            <i class="icon-clock qm-expanded-visit-container__icon"></i>  <span class="qm-expanded-visit-container__text"> {{getAppointmentTime(visit)}}</span>
            </div>
            <div class="qm-flex-grid">
                <i class="icon-hourglass qm-expanded-visit-container__icon"></i>  <span class="qm-expanded-visit-container__text">{{ visit.waitingTimeStr }} min</span>
            </div>
            <div class="qm-flex-grid">
                <i class="icon-service qm-expanded-visit-container__icon"></i>  <span class="qm-expanded-visit-container__text">{{ visit.serviceName }}</span>
            </div>
          </div>

        </div>
        
        <div class="info-icon-container">
          <i class="icon-info qm-details-icon" (click)="selectedInfoButton(visit.visitId)"></i>
        </div>
        </div>
     
        <!-- Edit visit options -->
        <div *ngIf="visitClicked && selectedVisitId === visit.visitId && this.visitOptionStatus === 'initial'" 
                class="qm-visit-list__options" id="{{visit.visitId}}-visitOptionContainer">
          <div class="triangle-with-shadow"></div>
          <div class="qm-visit-list__options__rec">
            <div class="qm-visit-list__options__heading">
              <div class="qm-title">
                {{'visit_options'|translate}}
              </div>
              <div class="qm-icon">
                <i class="icon-close" (click)=" closeVisitOptions()"></i>
              </div>

            </div>
            <div class="qm-visit-list__options__container">

              <span *ngIf="canTransferQ" class="visit-tray-option visit-transfer-queue-btn">
                <span class="content" (click)="transferToQ(visit)">
                  <span class="icon">
                    <i class="icon-queue"></i>
                  </span>
                  <span class="label">
                    {{'transfer_visit_queue_header_simple' | translate}}
                  </span>
                </span>
              </span>
              <span *ngIf="canTransferStaff" class="visit-tray-option visit-transfer-staff-btn">

                <span class="content" (click)="transferToStaffPool(visit)">
                  <span class="icon">
                    <i class="icon-customer-solid"></i>
                  </span>
                  <span class="label">
                    {{'transfer_visit_user_pool_header_simple' | translate}}
                  </span>
                </span>
              </span>
              <span *ngIf="canTransferSP" class="visit-tray-option visit-transfer-sp-btn">
                <span class="content" (click)="transferToSPfPool(visit)">
                  <span class="icon">
                    <i class="icon-screen"></i>
                  </span>
                  <span class="label">
                    {{'transfer_visit_sp_pool_header_simple' | translate}}
                  </span>
                </span>
              </span>

              <div style="display:flex;width: 66%;margin: auto;">
                <span *ngIf="canDelete" class="visit-tray-option-bottom visit-delete-btn" (click)="deleteVisit(i,$event)">
                  <span class="bottom-icon-container">
                    <span class="icon"> <i class="icon-delete"></i></span>
                    <span class="content">{{'remove' | translate}}</span>
                  </span>
                </span>
                <span *ngIf="canCherryPick" class="visit-tray-option-bottom  visit-cherry-pick-btn" (click)="cherryPickVisit(i,$event)" [ngStyle]="{'cursor': dsOrOutcomeExists && canCherryPick ? '' : 'pointer'}">
                  <span class="bottom-icon-container">
                    <span class="icon" [ngStyle]="{'color': dsOrOutcomeExists && canCherryPick ? '#bdbdbd' : '#E50046'}"> 
                      <i *ngIf="userDirection === 'ltr'" class="icon-check" ></i>
                      <i *ngIf="userDirection === 'rtl'" class="icon-check-rtl" ></i>
                    </span>
                    <span class="content" [ngStyle]="{'color': dsOrOutcomeExists && canCherryPick ? '#bdbdbd' : '#E50046'}"> {{'serve'|
                      translate}}
                    </span>
                  </span>
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- second options -->
        <div class="qm-visit-list__options" *ngIf="visitClicked && selectedVisitId === visit.visitId && (visitOptionStatus === 'staff' || visitOptionStatus === 'cp' || visitOptionStatus === 'tq')">
          <div class="triangle-with-shadow"></div>
          <div class="qm-visit-list__options__rec">
            <div class="qm-visit-list__options__heading">
              <div class="qm-title">
                <i *ngIf="userDirection === 'ltr'" class="icon-caret-left qm-icon_back" (click) = "backToQueueOptionsButton()"></i>
                <i *ngIf="userDirection === 'rtl'" class="icon-caret-right qm-icon_back" (click) = "backToQueueOptionsButton()"></i>
                <span *ngIf ="visitOptionStatus === 'staff'">{{'staff_member'|translate}} </span>
                <span *ngIf ="visitOptionStatus === 'cp'">{{'counter_pool'|translate}} </span>
                <span *ngIf ="visitOptionStatus === 'tq'">{{'queue_transfer'|translate}} </span>
              </div>
              <div class="qm-icon">
                <i class="icon-close" (click)="closeVisitOptions()"></i>
              </div>
            </div>
            <qm-transfer-to-staff-pool *ngIf ="this.visitOptionStatus === 'staff'"></qm-transfer-to-staff-pool>
            <qm-transfer-to-service-pool *ngIf ="this.visitOptionStatus === 'cp'"></qm-transfer-to-service-pool>
            <qm-trasfer-to-queue *ngIf ="this.visitOptionStatus === 'tq'"></qm-trasfer-to-queue>
          </div>
        </div>
       
      </div>
    </div>
  </div>
</div>